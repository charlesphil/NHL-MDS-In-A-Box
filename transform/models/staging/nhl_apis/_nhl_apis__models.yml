version: 2

models:
  - name: stg_nhl_api__games
    description:
    columns:
      - name: id
        description: The primary key for this table.
        data_tests:
          - unique
          - not_null
      - name: eastern_start_time
        description: The start time of the game (EST).
        data_tests:
          - not_null
      - name: game_date
        description: The date of when the game was played.
        data_tests:
          - not_null
      - name: game_number
        description: The ordinal number of the game within a season.
        data_tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 1
      - name: game_schedule_state_id
        description: >
          The scheduled state of the game:
          1: Regular season game.
          2: Postseason game.
          5: Cancelled.
        data_tests:
      - name: game_state_id
        description: >
          The state of the game:
          4: Game ended in a tie.
        data_tests:
      - name: game_type
        description:
        data_tests:
      - name: home_score
        description:
        data_tests:
      - name: home_team_id
        description:
        data_tests:
      - name: period
        description:
        data_tests:
      - name: season
        description:
        data_tests:
      - name: visiting_score
        description:
        data_tests:
      - name: visiting_team_id
        description:
        data_tests:
      - name: _dlt_load_time
        description:
        data_tests:
      - name: _dlt_id
        description:
        data_tests:
  - name: stg_nhl_api__goalies
    description:
    columns:
      - name:
        description:
        data_tests:

  - name: stg_nhl_api__skaters
    description:
    columns:
      - name:
        description:
        data_tests:

  - name: stg_nhl_api__teams
    description: This model pulls in NHL teams data from the NHL source.
    columns:
      - name: id
        description: >
          The primary key for this table. Note that IDs 70 and 99 correspond to
          placeholder teams 'To be determined' and 'NHL', respectively.
        data_tests:
          - unique
          - not_null
      - name: franchise_id
        description: The ID of the franchise.
      - name: full_name
        description: >
          The name of the team. Franchises can have their team names changed
          over time so multiple teams can map to the same franchise.
        data_tests:
          - unique
          - not_null
      - name: league_id
        description: ID for the league. Currently only has one value (133).
        data_tests:
          - not_null
          - accepted_values:
              values: [133]
              quote: false
      - name: raw_tricode
        description: >
          Three-letter identifier that maps to a team. Not apparently different
          from `tricode` at the moment.
        data_tests:
          - unique
          - not_null
      - name: tricode
        description: >
          Three-letter identifier that maps to a team. Not apparently different
          from `raw_tricode` at the moment.
        data_tests:
          - unique
          - not_null
      - name: _dlt_load_time
        description: The time dlt loaded the data in local time (EST).
        data_tests:
          - not_null
      - name: _dlt_id
        description: The unique identifier assigned by dlt upon load.
        data_tests:
          - not_null
